apiVersion: v1
kind: Secret
metadata:
  labels:
    app.kubernetes.io/component: alert-router
    app.kubernetes.io/instance: main
    app.kubernetes.io/name: alertmanager
    app.kubernetes.io/part-of: kube-prometheus
    app.kubernetes.io/version: 0.24.0
  name: alertmanager-main
  namespace: monitoring
stringData:
  alertmanager.yaml: |-
   global:
     resolve_timeout: 5m
     http_config:
     follow_redirects: true
     smtp_hello: localhost
     smtp_require_tls: false
     wechat_api_url: https://qyapi.weixin.qq.com/cgi-bin/
   route:
     receiver: webhook
     group_by:
      - job
      - severity
     continue: false
     group_wait: 30s
     group_interval: 3m
     repeat_interval: 12h
   receivers:
   - name: webhook
     webhook_configs:
     - send_resolved: true
       http_config:
       authorization:
         bearer_token: 9093678b-f3ee-485b-b9b6-88dcc9d229f9
       follow_redirects: true
     url: http://work-wechat-robot.monitoring.svc/prometheus_webhook
     max_alerts: 0
   templates:
     - /etc/alertmanager/config/template.tmp1 
type: Opaque
